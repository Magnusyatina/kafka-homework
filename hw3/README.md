# Домашнее задание №3. Работа с транзакциями kafka

## 1. Описание кластера kafka

В ходе выполнения задания был настроен кластер kafka в следующей конфигурации:
- 3 брокера и контроллера Kafka;
- Каждый сервер Kafka выступает в роли брокера и контроллера.

Полная конфигурация кластера Kafka представлена в файле docker-compose.yml:
[docker-compose.yml](docker-compose.yml)

## 2. Описание продюсера

Для отправки сообщений в Kafka в рамках задачи было написано простое приложение на Java
с использованием библиотеки kafka-clients 3.7.0. 
Данное приложение должно отправить 5 сообщений в два разных топика и подтвердить транзакцию, 
после чего отправить два других сообщения в те же топики и отменить транзакцию.

Для работы продюсера в транзакционном режиме необходимо в KafkaProducer задать настройку TRANSACTIONAL_ID_CONFIG с указанием идентификатора открываемой транзакции,
после чего следуют команды инициализации и старта транзакции:
```java
kafkaProducer.initTransactions();
kafkaProducer.beginTransaction();
```

Для подтверждения транзакции используется следующая команда:
```java
kafkaProducer.commitTransaction();
```

Для отмены транзакции используется следующая команда:
```java
kafkaProducer.abortTransaction();
```

Программа представлена в классе ProducerApplication:
[ProducerApplication.java](src%2Fmain%2Fjava%2Forg%2Fmagnusario%2FProducerApplication.java)

## 3. Описание консюмера

Для чтения сообщений из Kafka в рамках задачи было написано простое приложение на Java с использованием библиотеки kafka-clients 3.7.0.

Данное приложение должно прочитать сообщения из топиков, в которые продюсер ранее отправлял сообщения с подтверждением и отменой транзакции,
в двух режимах: чтение всех сообщений, чтение только подтвержденных сообщений в рамках транзакции.

Для включения режима чтения только подтвержденных сообщения из kafka требуется задать настройку ISOLATION_LEVEL_CONFIG для KafkaConsumer в read_committed
и read_uncommitted в случае обратного (по умолчанию задана настройка read_uncommitted)

Дополнительно для каждого клиента консюмера задан свой group id для чтения всех сообщений из представленных топиков

Программа представлена в классе ConsumerApplication:
[ConsumerApplication.java](src%2Fmain%2Fjava%2Forg%2Fmagnusario%2FConsumerApplication.java)

Результат работы над поставленной задачей

![result.png](images%2Fresult.png)
Как видно из логов вывода

